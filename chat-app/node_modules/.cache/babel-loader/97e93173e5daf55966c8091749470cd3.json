{"ast":null,"code":"import _defineProperty from\"C:/Users/Walid/Documents/Real time chat application using MERN stack/chat-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/Walid/Documents/Real time chat application using MERN stack/chat-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"C:/Users/Walid/Documents/Real time chat application using MERN stack/chat-app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Walid/Documents/Real time chat application using MERN stack/chat-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Walid/Documents/Real time chat application using MERN stack/chat-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from'react';import{Link,useNavigate}from'react-router-dom';import Logo from'../assets/Logo.png';import{ToastContainer,toast}from'react-toastify';import{loginRoute}from'../utils/APIRoutes';import FormContainer from'../styled-components/FormContainer';import'react-toastify/dist/ReactToastify.css';import axios from'axios';import toastOptions from'../utils/ToastOptions';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Login=function Login(){var _useState=useState({username:\"\",password:\"\"}),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var navigate=useNavigate();useEffect(function(){if(localStorage.getItem('user'))navigate('/');},[navigate]);var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var password,username,_yield$axios$post,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();if(!handleValidation()){_context.next=8;break;}password=user.password,username=user.username;_context.next=5;return axios.post(loginRoute,{username:username,password:password});case 5:_yield$axios$post=_context.sent;data=_yield$axios$post.data;if(!data.status)toast.error(data.msg,toastOptions);else{localStorage.setItem('user',JSON.stringify(data.user));navigate(\"/\");}case 8:case\"end\":return _context.stop();}}},_callee);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();var handleValidation=function handleValidation(){var password=user.password,username=user.username;if(username.length===0){toast.error(\"Username is required.\",toastOptions);return false;}else if(password.length===0){toast.error(\"Password is required.\",toastOptions);return false;}return true;};var handleChange=function handleChange(e){setUser(function(prevUser){return _objectSpread(_objectSpread({},prevUser),{},_defineProperty({},e.target.name,e.target.value));});};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(FormContainer,{children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:function onSubmit(e){return handleSubmit(e);},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"brand\",children:[/*#__PURE__*/_jsx(\"img\",{src:Logo,alt:\"Friends Logo\"}),/*#__PURE__*/_jsx(\"h1\",{children:\"\\u0627\\u0644\\u0623\\u0635\\u062F\\u0642\\u0627\\u0621\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Username\",name:\"username\",onChange:function onChange(e){return handleChange(e);},minLength:\"6\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"Password\",name:\"password\",onChange:function onChange(e){return handleChange(e);},minLength:\"8\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Login\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"you don't have an account ? \",\" \",/*#__PURE__*/_jsx(Link,{to:\"/register\",children:\"Register\"})]})]})}),/*#__PURE__*/_jsx(ToastContainer,{})]});};export default Login;","map":{"version":3,"names":["useEffect","useState","Link","useNavigate","Logo","ToastContainer","toast","loginRoute","FormContainer","axios","toastOptions","Login","username","password","user","setUser","navigate","localStorage","getItem","handleSubmit","e","preventDefault","handleValidation","post","data","status","error","msg","setItem","JSON","stringify","length","handleChange","prevUser","target","name","value"],"sources":["C:/Users/Walid/Documents/Real time chat application using MERN stack/chat-app/src/pages/Login.jsx"],"sourcesContent":["import { useEffect, useState } from 'react';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport Logo from '../assets/Logo.png';\r\nimport { ToastContainer, toast } from 'react-toastify';\r\nimport { loginRoute } from '../utils/APIRoutes';\r\nimport FormContainer from '../styled-components/FormContainer';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport axios from 'axios';\r\nimport toastOptions from '../utils/ToastOptions';\r\n\r\n\r\nconst Login = () => {\r\n\r\n    const [user, setUser] = useState({\r\n        username: \"\",\r\n        password: \"\",\r\n    });\r\n\r\n    const navigate = useNavigate();\r\n\r\n    useEffect(() => {\r\n        if (localStorage.getItem('user'))\r\n            navigate('/');\r\n    }, [navigate]);\r\n\r\n    const handleSubmit = async e => {\r\n        e.preventDefault();\r\n        if (handleValidation()) {\r\n            const { password, username } = user;\r\n            const { data } = await axios.post(loginRoute, {\r\n                username,\r\n                password,\r\n            });\r\n            if (!data.status)\r\n                toast.error(data.msg, toastOptions);\r\n            else {\r\n                localStorage.setItem('user', JSON.stringify(data.user));\r\n                navigate(\"/\");\r\n            }\r\n        }\r\n    };\r\n\r\n    const handleValidation = () => {\r\n        const { password, username } = user;\r\n        if (username.length === 0) {\r\n            toast.error(\r\n                \"Username is required.\",\r\n                toastOptions\r\n            );\r\n            return false;\r\n        }\r\n        else if (password.length === 0) {\r\n            toast.error(\r\n                \"Password is required.\",\r\n                toastOptions\r\n            );\r\n            return false;\r\n        }\r\n        return true;\r\n    };\r\n\r\n    const handleChange = e => {\r\n        setUser(prevUser => ({ ...prevUser, [e.target.name]: e.target.value }));\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <FormContainer>\r\n                <form onSubmit={e => handleSubmit(e)}>\r\n                    <div className=\"brand\">\r\n                        <img\r\n                            src={Logo}\r\n                            alt=\"Friends Logo\"\r\n                        />\r\n                        <h1>\r\n                            الأصدقاء\r\n                        </h1>\r\n                    </div>\r\n                    <input\r\n                        type=\"text\"\r\n                        placeholder=\"Username\"\r\n                        name=\"username\"\r\n                        onChange={e => handleChange(e)}\r\n                        minLength=\"6\"\r\n                    />\r\n                    <input\r\n                        type=\"password\"\r\n                        placeholder=\"Password\"\r\n                        name=\"password\"\r\n                        onChange={e => handleChange(e)}\r\n                        minLength=\"8\"\r\n                    />\r\n                    <button type=\"submit\">\r\n                        Login\r\n                    </button>\r\n                    <span>\r\n                        you don't have an account ? {\" \"}\r\n                        <Link to=\"/register\">Register</Link>\r\n                    </span>\r\n                </form>\r\n            </FormContainer >\r\n            <ToastContainer />\r\n        </>\r\n    )\r\n};\r\n\r\n\r\nexport default Login;"],"mappings":"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"},"metadata":{},"sourceType":"module"}